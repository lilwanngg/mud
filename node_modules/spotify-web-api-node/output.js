(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";var Request=require("./base-request");var DEFAULT_HOST="accounts.spotify.com",DEFAULT_PORT=443,DEFAULT_SCHEME="https";module.exports.builder=function(){return Request.builder().withHost(DEFAULT_HOST).withPort(DEFAULT_PORT).withScheme(DEFAULT_SCHEME)}},{"./base-request":2}],2:[function(require,module,exports){"use strict";var Request=function(builder){if(!builder){throw new Error("No builder supplied to constructor")}this.host=builder.host;this.port=builder.port;this.scheme=builder.scheme;this.queryParameters=builder.queryParameters;this.bodyParameters=builder.bodyParameters;this.headers=builder.headers;this.path=builder.path};Request.prototype.getHost=function(){return this.host};Request.prototype.getPort=function(){return this.port};Request.prototype.getScheme=function(){return this.scheme};Request.prototype.getPath=function(){return this.path};Request.prototype.getQueryParameters=function(){return this.queryParameters};Request.prototype.getBodyParameters=function(){return this.bodyParameters};Request.prototype.getHeaders=function(){return this.headers};Request.prototype.getURI=function(){if(!this.scheme||!this.host||!this.port){throw new Error("Missing components necessary to construct URI")}var uri=this.scheme+"://"+this.host;if(this.scheme==="http"&&this.port!==80||this.scheme==="https"&&this.port!==443){uri+=":"+this.port}if(this.path){uri+=this.path}return uri};Request.prototype.getURL=function(){var uri=this.getURI();if(this.getQueryParameters()){return uri+this.getQueryParameterString(this.getQueryParameters())}else{return uri}};Request.prototype.addQueryParameters=function(queryParameters){for(var key in queryParameters){this.addQueryParameter(key,queryParameters[key])}};Request.prototype.addQueryParameter=function(key,value){if(!this.queryParameters){this.queryParameters={}}this.queryParameters[key]=value};Request.prototype.addBodyParameters=function(bodyParameters){for(var key in bodyParameters){this.addBodyParameter(key,bodyParameters[key])}};Request.prototype.addBodyParameter=function(key,value){if(!this.bodyParameters){this.bodyParameters={}}this.bodyParameters[key]=value};Request.prototype.addHeaders=function(headers){if(!this.headers){this.headers=headers}else{for(var key in headers){this.headers[key]=headers[key]}}};Request.prototype.getQueryParameterString=function(){var queryParameters=this.getQueryParameters();if(!queryParameters){return}var queryParameterString="?";var first=true;for(var key in queryParameters){if(queryParameters.hasOwnProperty(key)){if(!first){queryParameterString+="&"}else{first=false}queryParameterString+=key+"="+queryParameters[key]}}return queryParameterString};var Builder=function(){var host,port,scheme,queryParameters,bodyParameters,headers,jsonBody};Builder.prototype.withHost=function(host){this.host=host;return this};Builder.prototype.withPort=function(port){this.port=port;return this};Builder.prototype.withScheme=function(scheme){this.scheme=scheme;return this};Builder.prototype.withQueryParameters=function(queryParameters){this.queryParameters=queryParameters;return this};Builder.prototype.withPath=function(path){this.path=path;return this};Builder.prototype.withBodyParameters=function(bodyParameters){this.bodyParameters=bodyParameters;return this};Builder.prototype.withHeaders=function(headers){this.headers=headers;return this};Builder.prototype.build=function(){return new Request(this)};module.exports.builder=function(){return new Builder}},{}],3:[function(require,module,exports){"use strict";var superagent=require("superagent"),WebApiError=require("./webapi-error");var HttpManager={};var _getParametersFromRequest=function(request){var options={};if(request.getQueryParameters()){options.query=request.getQueryParameters()}if(request.getHeaders()&&request.getHeaders()["Content-Type"]==="application/json"){options.data=JSON.stringify(request.getBodyParameters())}else if(request.getBodyParameters()){options.data=request.getBodyParameters()}if(request.getHeaders()){options.headers=request.getHeaders()}return options};var _getErrorObject=function(defaultMessage,err){var errorObject;if(typeof err.error==="object"&&typeof err.error.message==="string"){errorObject=new WebApiError(err.error.message,err.error.status)}else if(typeof err.error==="string"){errorObject=new WebApiError(err.error+": "+err["error_description"])}else if(typeof err==="string"){try{var parsedError=JSON.parse(err);errorObject=new WebApiError(parsedError.error.message,parsedError.error.status)}catch(err){}}if(!errorObject){errorObject=new WebApiError(defaultMessage+": "+JSON.stringify(err))}return errorObject};HttpManager._makeRequest=function(method,options,uri,callback){var req=method(uri);if(options.query){req.query(options.query)}if(options.data){req.send(data)}if(options.headers){req.set(options.headers)}req.end(function(err,response){if(err){var errorObject=_getErrorObject("Request error",{error:err});return callback(errorObject)}return callback(null,{body:response.body,headers:response.headers,statusCode:response.statusCode})})};HttpManager.get=function(request,callback){var options=_getParametersFromRequest(request);var method=superagent.get;HttpManager._makeRequest(method,options,request.getURI(),callback)};HttpManager.post=function(request,callback){var options=_getParametersFromRequest(request);var method=superagent.post;HttpManager._makeRequest(method,options,request.getURI(),callback)};HttpManager.del=function(request,callback){var options=_getParametersFromRequest(request);var method=superagent.del;HttpManager._makeRequest(method,options,request.getURI(),callback)};HttpManager.put=function(request,callback){var options=_getParametersFromRequest(request);var method=superagent.put;HttpManager._makeRequest(method,options,request.getURI(),callback)};module.exports=HttpManager},{"./webapi-error":5,superagent:9}],4:[function(require,module,exports){"use strict";var AuthenticationRequest=require("./authentication-request"),WebApiRequest=require("./webapi-request"),HttpManager=require("./http-manager");function SpotifyWebApi(credentials){this._credentials=credentials||{}}SpotifyWebApi.prototype={_addBodyParameters:function(request,options){if(options){for(var key in options){if(key!=="credentials"){request.addBodyParameter(key,options[key])}}}},_addQueryParameters:function(request,options){if(!options){return}for(var key in options){if(key!=="credentials"){request.addQueryParameter(key,options[key])}}},_performRequest:function(method,request){var promiseFunction=function(resolve,reject){method(request,function(error,result){if(error){reject(error)}else{resolve(result)}})};return new Promise(promiseFunction)},_addAccessToken:function(request,accessToken){if(accessToken){request.addHeaders({Authorization:"Bearer "+accessToken})}},setCredentials:function(credentials){for(var key in credentials){if(credentials.hasOwnProperty(key)){this._credentials[key]=credentials[key]}}},getCredentials:function(){return this._credentials},resetCredentials:function(){this._credentials=null},setClientId:function(clientId){this._setCredential("clientId",clientId)},setClientSecret:function(clientSecret){this._setCredential("clientSecret",clientSecret)},setAccessToken:function(accessToken){this._setCredential("accessToken",accessToken)},setRefreshToken:function(refreshToken){this._setCredential("refreshToken",refreshToken)},setRedirectURI:function(redirectUri){this._setCredential("redirectUri",redirectUri)},getRedirectURI:function(){return this._getCredential("redirectUri")},getClientId:function(){return this._getCredential("clientId")},getClientSecret:function(){return this._getCredential("clientSecret")},getAccessToken:function(){return this._getCredential("accessToken")},getRefreshToken:function(){return this._getCredential("refreshToken")},resetClientId:function(){this._resetCredential("clientId")},resetClientSecret:function(){this._resetCredential("clientSecret")},resetAccessToken:function(){this._resetCredential("accessToken")},resetRefreshToken:function(){this._resetCredential("refreshToken")},resetRedirectURI:function(){this._resetCredential("redirectUri")},_setCredential:function(credentialKey,value){this._credentials=this._credentials||{};this._credentials[credentialKey]=value},_getCredential:function(credentialKey){if(!this._credentials){return}else{return this._credentials[credentialKey]}},_resetCredential:function(credentialKey){if(!this._credentials){return}else{this._credentials[credentialKey]=null}},getTrack:function(trackId,options,callback){var actualCallback;if(typeof options==="function"){actualCallback=options}else{actualCallback=callback}var actualOptions={};if(typeof options==="object"){Object.keys(options).forEach(function(key){actualOptions[key]=options[key]})}var request=WebApiRequest.builder().withPath("/v1/tracks/"+trackId).withQueryParameters(actualOptions).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(actualCallback){promise.then(function(data){actualCallback(null,data)},function(err){actualCallback(err)})}else{return promise}},getTracks:function(trackIds,options,callback){var actualCallback;if(typeof options==="function"){actualCallback=options}else{actualCallback=callback}var actualOptions={};if(typeof options==="object"){Object.keys(options).forEach(function(key){actualOptions[key]=options[key]})}var request=WebApiRequest.builder().withPath("/v1/tracks").withQueryParameters({ids:trackIds.join(",")}).build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,actualOptions);var promise=this._performRequest(HttpManager.get,request);if(actualCallback){promise.then(function(data){actualCallback(null,data)},function(err){actualCallback(err)})}else{return promise}},getAlbum:function(albumId,options,callback){var actualCallback;if(typeof options==="function"){actualCallback=options}else{actualCallback=callback}var actualOptions={};if(typeof options==="object"){Object.keys(options).forEach(function(key){actualOptions[key]=options[key]})}var request=WebApiRequest.builder().withPath("/v1/albums/"+albumId).withQueryParameters(actualOptions).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(actualCallback){promise.then(function(data){actualCallback(null,data)},function(err){actualCallback(err)})}else{return promise}},getAlbums:function(albumIds,options,callback){var actualCallback;if(typeof options==="function"){actualCallback=options}else{actualCallback=callback}var actualOptions={};if(typeof options==="object"){Object.keys(options).forEach(function(key){actualOptions[key]=options[key]})}var request=WebApiRequest.builder().withPath("/v1/albums").withQueryParameters({ids:albumIds.join(",")}).build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,actualOptions);var promise=this._performRequest(HttpManager.get,request);if(actualCallback){promise.then(function(data){actualCallback(null,data)},function(err){actualCallback(err)})}else{return promise}},getArtist:function(artistId,callback){var request=WebApiRequest.builder().withPath("/v1/artists/"+artistId).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getArtists:function(artistIds,callback){var request=WebApiRequest.builder().withPath("/v1/artists").withQueryParameters({ids:artistIds.join(",")}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},search:function(query,types,options,callback){var request=WebApiRequest.builder().withPath("/v1/search/").withQueryParameters({type:types.join(","),q:query}).build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,options);var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},searchAlbums:function(query,options,callback){return this.search(query,["album"],options,callback)},searchArtists:function(query,options,callback){return this.search(query,["artist"],options,callback)},searchTracks:function(query,options,callback){return this.search(query,["track"],options,callback)},searchPlaylists:function(query,options,callback){return this.search(query,["playlist"],options,callback)},getArtistAlbums:function(artistId,options,callback){var request=WebApiRequest.builder().withPath("/v1/artists/"+artistId+"/albums").build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,options);var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getAlbumTracks:function(albumId,options,callback){var request=WebApiRequest.builder().withPath("/v1/albums/"+albumId+"/tracks").build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,options);var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getArtistTopTracks:function(artistId,country,callback){var request=WebApiRequest.builder().withPath("/v1/artists/"+artistId+"/top-tracks").withQueryParameters({country:country}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getArtistRelatedArtists:function(artistId,callback){var request=WebApiRequest.builder().withPath("/v1/artists/"+artistId+"/related-artists").build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getUser:function(userId,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getMe:function(callback){var request=WebApiRequest.builder().withPath("/v1/me").build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getUserPlaylists:function(userId,options,callback){var path;if(typeof userId==="string"){path="/v1/users/"+encodeURI(userId)+"/playlists"}else{path="/v1/me/playlists"}var request=WebApiRequest.builder().withPath(path).build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,options);var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getPlaylist:function(userId,playlistId,options,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId).build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,options);var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getPlaylistTracks:function(userId,playlistId,options,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId+"/tracks").withQueryParameters(options).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},createPlaylist:function(userId,playlistName,options,callback){var actualCallback;if(typeof options==="function"){actualCallback=options}else{actualCallback=callback}var actualOptions={name:playlistName};if(typeof options==="object"){Object.keys(options).forEach(function(key){actualOptions[key]=options[key]})}var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists").withHeaders({"Content-Type":"application/json"}).withBodyParameters(actualOptions).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.post,request);if(actualCallback){promise.then(function(data){actualCallback(null,data)},function(err){actualCallback(err)})}else{return promise}},followPlaylist:function(userId,playlistId,options,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId+"/followers").withBodyParameters(options).withHeaders({"Content-Type":"application/json"}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.put,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},unfollowPlaylist:function(userId,playlistId,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId+"/followers").withHeaders({"Content-Type":"application/json"}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.del,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},changePlaylistDetails:function(userId,playlistId,options,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId).withHeaders({"Content-Type":"application/json"}).withBodyParameters(options).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.put,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},addTracksToPlaylist:function(userId,playlistId,tracks,options,callback){var tracksString;if(typeof tracks==="object"){tracksString=tracks.join()}else{tracksString=tracks}var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId+"/tracks").withHeaders({"Content-Type":"application/json"}).withQueryParameters({uris:tracksString}).build();this._addQueryParameters(request,options);this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.post,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},removeTracksFromPlaylist:function(userId,playlistId,tracks,options,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId+"/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters({tracks:tracks}).build();this._addBodyParameters(request,options);this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.del,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},removeTracksFromPlaylistByPosition:function(userId,playlistId,positions,snapshotId,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId+"/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters({positions:positions,snapshot_id:snapshotId}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.del,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},replaceTracksInPlaylist:function(userId,playlistId,uris,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId+"/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters({uris:uris}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.put,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},reorderTracksInPlaylist:function(userId,playlistId,rangeStart,insertBefore,options,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId+"/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters({range_start:rangeStart,insert_before:insertBefore}).build();this._addAccessToken(request,this.getAccessToken());this._addBodyParameters(request,options);var promise=this._performRequest(HttpManager.put,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getAudioFeaturesForTrack:function(trackId,callback){var request=WebApiRequest.builder().withPath("/v1/audio-features/"+trackId).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getAudioFeaturesForTracks:function(trackIds,callback){var request=WebApiRequest.builder().withPath("/v1/audio-features").withQueryParameters({ids:trackIds.join(",")}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getRecommendations:function(options,callback){var request=WebApiRequest.builder().withPath("/v1/recommendations").build();var _opts={};var optionsOfTypeArray=["seed_artists","seed_genres","seed_tracks"];for(var option in options){if(options.hasOwnProperty(option)){if(optionsOfTypeArray.indexOf(option)!==-1&&Object.prototype.toString.call(options[option])==="[object Array]"){_opts[option]=options[option].join(",")}else{_opts[option]=options[option]}}}this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,_opts);var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getAvailableGenreSeeds:function(callback){var request=WebApiRequest.builder().withPath("/v1/recommendations/available-genre-seeds").build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},createAuthorizeURL:function(scopes,state){var request=AuthenticationRequest.builder().withPath("/authorize").withQueryParameters({client_id:this.getClientId(),response_type:"code",redirect_uri:this.getRedirectURI(),scope:scopes.join("%20"),state:state}).build();return request.getURL()},getMySavedTracks:function(options,callback){var request=WebApiRequest.builder().withPath("/v1/me/tracks").withQueryParameters(options).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},containsMySavedTracks:function(trackIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/tracks/contains").withQueryParameters({ids:trackIds.join(",")}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},removeFromMySavedTracks:function(trackIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters(trackIds).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.del,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},addToMySavedTracks:function(trackIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/tracks").withHeaders({"Content-Type":"application/json"}).withBodyParameters(trackIds).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.put,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},removeFromMySavedAlbums:function(albumIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/albums").withHeaders({"Content-Type":"application/json"}).withBodyParameters(albumIds).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.del,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},addToMySavedAlbums:function(albumIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/albums").withHeaders({"Content-Type":"application/json"}).withBodyParameters(albumIds).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.put,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getMySavedAlbums:function(options,callback){var request=WebApiRequest.builder().withPath("/v1/me/albums").withQueryParameters(options).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},containsMySavedAlbums:function(albumIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/albums/contains").withQueryParameters({ids:albumIds.join(",")}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getMyTopArtists:function(options,callback){var request=WebApiRequest.builder().withPath("/v1/me/top/artists").build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,options);var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getMyTopTracks:function(options,callback){var request=WebApiRequest.builder().withPath("/v1/me/top/tracks").build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,options);var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},followUsers:function(userIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/following").withQueryParameters({ids:userIds.join(","),type:"user"}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.put,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},followArtists:function(artistIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/following").withQueryParameters({ids:artistIds.join(","),type:"artist"}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.put,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},unfollowUsers:function(userIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/following").withQueryParameters({ids:userIds.join(","),type:"user"}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.del,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},unfollowArtists:function(artistIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/following").withQueryParameters({ids:artistIds.join(","),type:"artist"}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.del,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},isFollowingUsers:function(userIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/following/contains").withQueryParameters({ids:userIds.join(","),type:"user"}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getFollowedArtists:function(options,callback){var request=WebApiRequest.builder().withPath("/v1/me/following").withHeaders({"Content-Type":"application/json"}).withQueryParameters({type:"artist"}).build();this._addAccessToken(request,this.getAccessToken());this._addQueryParameters(request,options);var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},areFollowingPlaylist:function(userId,playlistId,followerIds,callback){var request=WebApiRequest.builder().withPath("/v1/users/"+encodeURI(userId)+"/playlists/"+playlistId+"/followers/contains").withQueryParameters({ids:followerIds.join(",")}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},isFollowingArtists:function(artistIds,callback){var request=WebApiRequest.builder().withPath("/v1/me/following/contains").withQueryParameters({ids:artistIds.join(","),type:"artist"}).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getNewReleases:function(options,callback){var request=WebApiRequest.builder().withPath("/v1/browse/new-releases").withHeaders({"Content-Type":"application/json"}).withQueryParameters(options).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getFeaturedPlaylists:function(options,callback){var request=WebApiRequest.builder().withPath("/v1/browse/featured-playlists").withHeaders({"Content-Type":"application/json"}).withQueryParameters(options).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data);
},function(err){callback(err)})}else{return promise}},getCategories:function(options,callback){var request=WebApiRequest.builder().withPath("/v1/browse/categories").withQueryParameters(options).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getCategory:function(categoryId,options,callback){var request=WebApiRequest.builder().withPath("/v1/browse/categories/"+categoryId).withQueryParameters(options).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}},getPlaylistsForCategory:function(categoryId,options,callback){var request=WebApiRequest.builder().withPath("/v1/browse/categories/"+categoryId+"/playlists").withQueryParameters(options).build();this._addAccessToken(request,this.getAccessToken());var promise=this._performRequest(HttpManager.get,request);if(callback){promise.then(function(data){callback(null,data)},function(err){callback(err)})}else{return promise}}};SpotifyWebApi._addMethods=function(methods){for(var i in methods){if(methods.hasOwnProperty(i)){this.prototype[i]=methods[i]}}};module.exports=SpotifyWebApi},{"./authentication-request":1,"./http-manager":3,"./webapi-request":6}],5:[function(require,module,exports){"use strict";function WebapiError(message,statusCode){this.name="WebapiError";this.message=message||"";this.statusCode=statusCode}WebapiError.prototype=Error.prototype;module.exports=WebapiError},{}],6:[function(require,module,exports){"use strict";var Request=require("./base-request");var DEFAULT_HOST="api.spotify.com",DEFAULT_PORT=443,DEFAULT_SCHEME="https";module.exports.builder=function(){return Request.builder().withHost(DEFAULT_HOST).withPort(DEFAULT_PORT).withScheme(DEFAULT_SCHEME)}},{"./base-request":2}],7:[function(require,module,exports){if(typeof module!=="undefined"){module.exports=Emitter}function Emitter(obj){if(obj)return mixin(obj)}function mixin(obj){for(var key in Emitter.prototype){obj[key]=Emitter.prototype[key]}return obj}Emitter.prototype.on=Emitter.prototype.addEventListener=function(event,fn){this._callbacks=this._callbacks||{};(this._callbacks["$"+event]=this._callbacks["$"+event]||[]).push(fn);return this};Emitter.prototype.once=function(event,fn){function on(){this.off(event,on);fn.apply(this,arguments)}on.fn=fn;this.on(event,on);return this};Emitter.prototype.off=Emitter.prototype.removeListener=Emitter.prototype.removeAllListeners=Emitter.prototype.removeEventListener=function(event,fn){this._callbacks=this._callbacks||{};if(0==arguments.length){this._callbacks={};return this}var callbacks=this._callbacks["$"+event];if(!callbacks)return this;if(1==arguments.length){delete this._callbacks["$"+event];return this}var cb;for(var i=0;i<callbacks.length;i++){cb=callbacks[i];if(cb===fn||cb.fn===fn){callbacks.splice(i,1);break}}return this};Emitter.prototype.emit=function(event){this._callbacks=this._callbacks||{};var args=[].slice.call(arguments,1),callbacks=this._callbacks["$"+event];if(callbacks){callbacks=callbacks.slice(0);for(var i=0,len=callbacks.length;i<len;++i){callbacks[i].apply(this,args)}}return this};Emitter.prototype.listeners=function(event){this._callbacks=this._callbacks||{};return this._callbacks["$"+event]||[]};Emitter.prototype.hasListeners=function(event){return!!this.listeners(event).length}},{}],8:[function(require,module,exports){module.exports=function(arr,fn,initial){var idx=0;var len=arr.length;var curr=arguments.length==3?initial:arr[idx++];while(idx<len){curr=fn.call(null,curr,arr[idx],++idx,arr)}return curr}},{}],9:[function(require,module,exports){var Emitter=require("emitter");var reduce=require("reduce");var requestBase=require("./request-base");var isObject=require("./is-object");var root;if(typeof window!=="undefined"){root=window}else if(typeof self!=="undefined"){root=self}else{root=this}function noop(){}var request=module.exports=require("./request").bind(null,Request);request.getXHR=function(){if(root.XMLHttpRequest&&(!root.location||"file:"!=root.location.protocol||!root.ActiveXObject)){return new XMLHttpRequest}else{try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}}return false};var trim="".trim?function(s){return s.trim()}:function(s){return s.replace(/(^\s*|\s*$)/g,"")};function serialize(obj){if(!isObject(obj))return obj;var pairs=[];for(var key in obj){if(null!=obj[key]){pushEncodedKeyValuePair(pairs,key,obj[key])}}return pairs.join("&")}function pushEncodedKeyValuePair(pairs,key,val){if(Array.isArray(val)){return val.forEach(function(v){pushEncodedKeyValuePair(pairs,key,v)})}else if(isObject(val)){for(var subkey in val){pushEncodedKeyValuePair(pairs,key+"["+subkey+"]",val[subkey])}return}pairs.push(encodeURIComponent(key)+"="+encodeURIComponent(val))}request.serializeObject=serialize;function parseString(str){var obj={};var pairs=str.split("&");var pair;var pos;for(var i=0,len=pairs.length;i<len;++i){pair=pairs[i];pos=pair.indexOf("=");if(pos==-1){obj[decodeURIComponent(pair)]=""}else{obj[decodeURIComponent(pair.slice(0,pos))]=decodeURIComponent(pair.slice(pos+1))}}return obj}request.parseString=parseString;request.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};request.serialize={"application/x-www-form-urlencoded":serialize,"application/json":JSON.stringify};request.parse={"application/x-www-form-urlencoded":parseString,"application/json":JSON.parse};function parseHeader(str){var lines=str.split(/\r?\n/);var fields={};var index;var line;var field;var val;lines.pop();for(var i=0,len=lines.length;i<len;++i){line=lines[i];index=line.indexOf(":");field=line.slice(0,index).toLowerCase();val=trim(line.slice(index+1));fields[field]=val}return fields}function isJSON(mime){return/[\/+]json\b/.test(mime)}function type(str){return str.split(/ *; */).shift()}function params(str){return reduce(str.split(/ *; */),function(obj,str){var parts=str.split(/ *= */),key=parts.shift(),val=parts.shift();if(key&&val)obj[key]=val;return obj},{})}function Response(req,options){options=options||{};this.req=req;this.xhr=this.req.xhr;this.text=this.req.method!="HEAD"&&(this.xhr.responseType===""||this.xhr.responseType==="text")||typeof this.xhr.responseType==="undefined"?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;this._setStatusProperties(this.xhr.status);this.header=this.headers=parseHeader(this.xhr.getAllResponseHeaders());this.header["content-type"]=this.xhr.getResponseHeader("content-type");this._setHeaderProperties(this.header);this.body=this.req.method!="HEAD"?this._parseBody(this.text?this.text:this.xhr.response):null}Response.prototype.get=function(field){return this.header[field.toLowerCase()]};Response.prototype._setHeaderProperties=function(header){var ct=this.header["content-type"]||"";this.type=type(ct);var obj=params(ct);for(var key in obj)this[key]=obj[key]};Response.prototype._parseBody=function(str){var parse=request.parse[this.type];if(!parse&&isJSON(this.type)){parse=request.parse["application/json"]}return parse&&str&&(str.length||str instanceof Object)?parse(str):null};Response.prototype._setStatusProperties=function(status){if(status===1223){status=204}var type=status/100|0;this.status=this.statusCode=status;this.statusType=type;this.info=1==type;this.ok=2==type;this.clientError=4==type;this.serverError=5==type;this.error=4==type||5==type?this.toError():false;this.accepted=202==status;this.noContent=204==status;this.badRequest=400==status;this.unauthorized=401==status;this.notAcceptable=406==status;this.notFound=404==status;this.forbidden=403==status};Response.prototype.toError=function(){var req=this.req;var method=req.method;var url=req.url;var msg="cannot "+method+" "+url+" ("+this.status+")";var err=new Error(msg);err.status=this.status;err.method=method;err.url=url;return err};request.Response=Response;function Request(method,url){var self=this;this._query=this._query||[];this.method=method;this.url=url;this.header={};this._header={};this.on("end",function(){var err=null;var res=null;try{res=new Response(self)}catch(e){err=new Error("Parser is unable to parse the response");err.parse=true;err.original=e;err.rawResponse=self.xhr&&self.xhr.responseText?self.xhr.responseText:null;err.statusCode=self.xhr&&self.xhr.status?self.xhr.status:null;return self.callback(err)}self.emit("response",res);if(err){return self.callback(err,res)}try{if(res.status>=200&&res.status<300){return self.callback(err,res)}var new_err=new Error(res.statusText||"Unsuccessful HTTP response");new_err.original=err;new_err.response=res;new_err.status=res.status;self.callback(new_err,res)}catch(e){self.callback(e)}})}Emitter(Request.prototype);for(var key in requestBase){Request.prototype[key]=requestBase[key]}Request.prototype.type=function(type){this.set("Content-Type",request.types[type]||type);return this};Request.prototype.responseType=function(val){this._responseType=val;return this};Request.prototype.accept=function(type){this.set("Accept",request.types[type]||type);return this};Request.prototype.auth=function(user,pass,options){if(!options){options={type:"basic"}}switch(options.type){case"basic":var str=btoa(user+":"+pass);this.set("Authorization","Basic "+str);break;case"auto":this.username=user;this.password=pass;break}return this};Request.prototype.query=function(val){if("string"!=typeof val)val=serialize(val);if(val)this._query.push(val);return this};Request.prototype.attach=function(field,file,filename){this._getFormData().append(field,file,filename||file.name);return this};Request.prototype._getFormData=function(){if(!this._formData){this._formData=new root.FormData}return this._formData};Request.prototype.callback=function(err,res){var fn=this._callback;this.clearTimeout();fn(err,res)};Request.prototype.crossDomainError=function(){var err=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");err.crossDomain=true;err.status=this.status;err.method=this.method;err.url=this.url;this.callback(err)};Request.prototype._timeoutError=function(){var timeout=this._timeout;var err=new Error("timeout of "+timeout+"ms exceeded");err.timeout=timeout;this.callback(err)};Request.prototype._appendQueryString=function(){var query=this._query.join("&");if(query){this.url+=~this.url.indexOf("?")?"&"+query:"?"+query}};Request.prototype.end=function(fn){var self=this;var xhr=this.xhr=request.getXHR();var timeout=this._timeout;var data=this._formData||this._data;this._callback=fn||noop;xhr.onreadystatechange=function(){if(4!=xhr.readyState)return;var status;try{status=xhr.status}catch(e){status=0}if(0==status){if(self.timedout)return self._timeoutError();if(self._aborted)return;return self.crossDomainError()}self.emit("end")};var handleProgress=function(e){if(e.total>0){e.percent=e.loaded/e.total*100}e.direction="download";self.emit("progress",e)};if(this.hasListeners("progress")){xhr.onprogress=handleProgress}try{if(xhr.upload&&this.hasListeners("progress")){xhr.upload.onprogress=handleProgress}}catch(e){}if(timeout&&!this._timer){this._timer=setTimeout(function(){self.timedout=true;self.abort()},timeout)}this._appendQueryString();if(this.username&&this.password){xhr.open(this.method,this.url,true,this.username,this.password)}else{xhr.open(this.method,this.url,true)}if(this._withCredentials)xhr.withCredentials=true;if("GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof data&&!this._isHost(data)){var contentType=this._header["content-type"];var serialize=this._serializer||request.serialize[contentType?contentType.split(";")[0]:""];if(!serialize&&isJSON(contentType))serialize=request.serialize["application/json"];if(serialize)data=serialize(data)}for(var field in this.header){if(null==this.header[field])continue;xhr.setRequestHeader(field,this.header[field])}if(this._responseType){xhr.responseType=this._responseType}this.emit("request",this);xhr.send(typeof data!=="undefined"?data:null);return this};request.Request=Request;request.get=function(url,data,fn){var req=request("GET",url);if("function"==typeof data)fn=data,data=null;if(data)req.query(data);if(fn)req.end(fn);return req};request.head=function(url,data,fn){var req=request("HEAD",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.options=function(url,data,fn){var req=request("OPTIONS",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};function del(url,fn){var req=request("DELETE",url);if(fn)req.end(fn);return req}request["del"]=del;request["delete"]=del;request.patch=function(url,data,fn){var req=request("PATCH",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.post=function(url,data,fn){var req=request("POST",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req};request.put=function(url,data,fn){var req=request("PUT",url);if("function"==typeof data)fn=data,data=null;if(data)req.send(data);if(fn)req.end(fn);return req}},{"./is-object":10,"./request":12,"./request-base":11,emitter:7,reduce:8}],10:[function(require,module,exports){function isObject(obj){return null!==obj&&"object"===typeof obj}module.exports=isObject},{}],11:[function(require,module,exports){var isObject=require("./is-object");exports.clearTimeout=function _clearTimeout(){this._timeout=0;clearTimeout(this._timer);return this};exports.parse=function parse(fn){this._parser=fn;return this};exports.serialize=function serialize(fn){this._serializer=fn;return this};exports.timeout=function timeout(ms){this._timeout=ms;return this};exports.then=function then(resolve,reject){if(!this._fullfilledPromise){var self=this;this._fullfilledPromise=new Promise(function(innerResolve,innerReject){self.end(function(err,res){if(err)innerReject(err);else innerResolve(res)})})}return this._fullfilledPromise.then(resolve,reject)};exports.use=function use(fn){fn(this);return this};exports.get=function(field){return this._header[field.toLowerCase()]};exports.getHeader=exports.get;exports.set=function(field,val){if(isObject(field)){for(var key in field){this.set(key,field[key])}return this}this._header[field.toLowerCase()]=val;this.header[field]=val;return this};exports.unset=function(field){delete this._header[field.toLowerCase()];delete this.header[field];return this};exports.field=function(name,val){this._getFormData().append(name,val);return this};exports.abort=function(){if(this._aborted){return this}this._aborted=true;this.xhr&&this.xhr.abort();this.req&&this.req.abort();this.clearTimeout();this.emit("abort");return this};exports.withCredentials=function(){this._withCredentials=true;return this};exports.redirects=function(n){this._maxRedirects=n;return this};exports.toJSON=function(){return{method:this.method,url:this.url,data:this._data}};exports._isHost=function _isHost(obj){var str={}.toString.call(obj);switch(str){case"[object File]":case"[object Blob]":case"[object FormData]":return true;default:return false}};exports.send=function(data){var obj=isObject(data);var type=this._header["content-type"];if(obj&&isObject(this._data)){for(var key in data){this._data[key]=data[key]}}else if("string"==typeof data){if(!type)this.type("form");type=this._header["content-type"];if("application/x-www-form-urlencoded"==type){this._data=this._data?this._data+"&"+data:data}else{this._data=(this._data||"")+data}}else{this._data=data}if(!obj||this._isHost(data))return this;if(!type)this.type("json");return this}},{"./is-object":10}],12:[function(require,module,exports){function request(RequestConstructor,method,url){if("function"==typeof url){return new RequestConstructor("GET",method).end(url)}if(2==arguments.length){return new RequestConstructor("GET",method)}return new RequestConstructor(method,url)}module.exports=request},{}]},{},[4]);
